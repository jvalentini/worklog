{"id":"wl-15p","title":"Profile snapshot generation performance","description":"Use Instruments/xctrace to identify bottlenecks in aggregation and storage logic","status":"closed","priority":1,"issue_type":"task","assignee":"justin","created_at":"2026-01-04T23:04:41.032226558-05:00","created_by":"justin","updated_at":"2026-01-04T23:08:15.136817174-05:00","closed_at":"2026-01-04T23:08:15.136822473-05:00","dependencies":[{"issue_id":"wl-15p","depends_on_id":"wl-hta","type":"parent-child","created_at":"2026-01-04T23:05:47.611932278-05:00","created_by":"justin"}]}
{"id":"wl-3hy","title":"Multiple export formats","description":"Add CSV, Excel, and custom report template exports","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-04T23:05:17.075336191-05:00","created_by":"justin","updated_at":"2026-01-04T23:05:17.075336191-05:00","dependencies":[{"issue_id":"wl-3hy","depends_on_id":"wl-59f","type":"parent-child","created_at":"2026-01-04T23:05:54.769105807-05:00","created_by":"justin"}]}
{"id":"wl-3r6","title":"Interactive setup wizard","description":"Create user onboarding flow with interactive setup","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T23:05:25.178852413-05:00","created_by":"justin","updated_at":"2026-01-04T23:05:25.178852413-05:00","dependencies":[{"issue_id":"wl-3r6","depends_on_id":"wl-f6k","type":"parent-child","created_at":"2026-01-04T23:05:58.367662932-05:00","created_by":"justin"}]}
{"id":"wl-48k","title":"Add smoke test checklist for attribution/trends/cron","status":"closed","priority":3,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":30,"created_at":"2026-01-02T15:03:56.173993511-05:00","updated_at":"2026-01-02T15:46:40.780963354-05:00","closed_at":"2026-01-02T15:37:41.85132301-05:00","dependencies":[{"issue_id":"wl-48k","depends_on_id":"wl-tcq","type":"parent-child","created_at":"2026-01-02T15:04:58.592700913-05:00","created_by":"daemon"}]}
{"id":"wl-49","title":"Implement snapshot JSON storage (V1)","description":"Context\n- Dashboard and scheduled runs will read JSON snapshots from ~/.local/share/worklog/{daily,weekly,monthly,quarterly}/\n\nWork\n- Define a versioned snapshot schema (schemaVersion=1) optimized for dashboard rendering (items + sources + dateRange).\n- Implement helpers for: file naming, directory selection, atomic write, list snapshots, load snapshot, and aggregate a daily date range by merging items and unioning sources.\n- Filenames:\n  - daily: standup-YYYY-MM-DD.json (day covered)\n  - weekly: standup-week-YYYY-MM-DD.json (Mon start)\n  - monthly: standup-month-YYYY-MM.json\n  - quarterly: standup-quarter-YYYY-QN.json\n\nVerification\n- Add unit tests for filename parsing + aggregation behavior.\n- Run: bun test\n- Run: bun run lint:fix\n- Run: bun run check","acceptance_criteria":"- Snapshot schema is versioned and documented in code\n- Can list and load snapshots for all periods\n- Can aggregate daily snapshots across a [start,end] range\n- Unit tests cover naming + aggregation\n- bun test passes; bun run check passes","notes":"Implemented snapshot JSON helpers in src/storage/snapshots.ts with atomic writes, list/load, and daily range aggregation + tests in src/storage/snapshots.test.ts. Verified: bun test, bun run lint:fix, bun run check.","status":"closed","priority":1,"issue_type":"feature","assignee":"justin","estimated_minutes":180,"created_at":"2026-01-04T13:04:52.8990951-05:00","created_by":"justin","updated_at":"2026-01-04T13:52:05.098085236-05:00","closed_at":"2026-01-04T13:52:05.098085236-05:00"}
{"id":"wl-50","title":"Add global noise filter for 'request interrupted by user'","description":"Context\n- Some AI session sources include noisy items like \"Request interrupted by user\" which should never show up in reports, history, or search.\n\nWork\n- Add a canonical predicate/filter that flags any WorkItem whose title or description contains \"request interrupted by user\" (case-insensitive).\n- Apply the filter in:\n  1) main worklog pipeline before aggregation/output\n  2) before saveToHistory() so new history.jsonl entries are clean\n  3) search result generation so older stored noisy items no longer appear\n  4) schedule run pipeline (once implemented)\n\nVerification\n- Add unit tests for matching variants (with/without brackets, with tool-use suffix).\n- Run: bun test\n- Run: bun run lint:fix\n- Run: bun run check","acceptance_criteria":"- Noisy items do not appear in any output format\n- New history.jsonl entries never include noisy items\n- worklog search hides noisy items from results\n- Unit tests cover matching variants\n- bun test passes; bun run check passes","notes":"Implemented global noise filter + tests; verified locally: bun test, bun run lint:fix, bun run check all pass.","status":"closed","priority":1,"issue_type":"bug","assignee":"justin","estimated_minutes":90,"created_at":"2026-01-04T13:04:56.291421509-05:00","created_by":"justin","updated_at":"2026-01-04T13:29:29.845479262-05:00","closed_at":"2026-01-04T13:29:29.845479262-05:00"}
{"id":"wl-51","title":"Support named weekdays in --date (previous occurrence)","description":"Context\n- Users want to run reports for named weekdays (e.g. \"Wednesday\") without computing dates manually.\n\nWork\n- Extend date parsing so any CLI path that uses --date can accept weekday names (mon/monday/... case-insensitive) in addition to YYYY-MM-DD.\n- Semantics: resolve to the previous occurrence of that weekday relative to now. If today is that weekday, resolve to 7 days ago (never today).\n\nVerification\n- Add unit tests for all weekdays and edge cases.\n- Run: bun test\n- Run: bun run lint:fix\n- Run: bun run check","acceptance_criteria":"- --date accepts YYYY-MM-DD and weekday names\n- Weekday resolves to previous occurrence (never today)\n- Unit tests cover all weekdays\n- bun test passes; bun run check passes","notes":"Implemented weekday name support for --date (previous occurrence, never today) via parseDateRange update in src/utils/dates.ts + tests in src/utils/dates.test.ts. Verified: bun test, bun run lint:fix, bun run check.","status":"closed","priority":2,"issue_type":"feature","assignee":"justin","estimated_minutes":90,"created_at":"2026-01-04T13:04:59.368301172-05:00","created_by":"justin","updated_at":"2026-01-04T13:52:05.163249681-05:00","closed_at":"2026-01-04T13:52:05.163249681-05:00"}
{"id":"wl-52","title":"Add worklog schedule run (generate snapshots + Slack)","description":"Context\n- Systemd timers (and cron fallback) will invoke a stable command to generate snapshots and post to Slack.\n\nWork\n- Add `worklog schedule run --period \u003cdaily|weekly|monthly|quarterly\u003e` in bin/worklog.ts.\n- For each period, compute the *previous* period dateRange:\n  - daily: yesterday\n  - weekly: previous week (Mon-Sun)\n  - monthly: previous month\n  - quarterly: previous quarter\n- Read configured sources and collect WorkItem[] with cron-safe behavior (skip failing sources).\n- Apply the global noise filter.\n- Write a snapshot JSON file using wl-49 helpers into ~/.local/share/worklog/\u003cperiod\u003e/...\n- Post to Slack for all periods using WORKLOG_SLACK_WEBHOOK or an explicit `--slack \u003curl\u003e` flag.\n\nVerification\n- Add tests for dateRange computation per period and output filename selection (mock time + mock filesystem writes).\n- Run: bun test\n- Run: bun run lint:fix\n- Run: bun run check\n- Manual: WORKLOG_SLACK_WEBHOOK=... worklog schedule run --period daily","acceptance_criteria":"- schedule run writes correct snapshot file for each period\n- schedule run posts to Slack for all periods\n- Date ranges match previous-period semantics\n- Unit tests cover date logic + output paths\n- bun test passes; bun run check passes","notes":"Implemented worklog schedule run --period \u003cdaily|weekly|monthly|quarterly\u003e via src/schedule.ts + bin/worklog.ts. Generates snapshot JSON via src/storage/snapshots.ts, applies noise filter, and posts Slack when webhook provided. Added tests in src/schedule.test.ts. Verified: bun test, bun run lint:fix, bun run check.","status":"closed","priority":1,"issue_type":"feature","assignee":"justin","estimated_minutes":180,"created_at":"2026-01-04T13:05:04.247671808-05:00","created_by":"justin","updated_at":"2026-01-04T13:58:26.92843196-05:00","closed_at":"2026-01-04T13:58:09.300823106-05:00","dependencies":[{"issue_id":"wl-52","depends_on_id":"wl-49","type":"blocks","created_at":"2026-01-04T15:53:17.875472646-05:00","created_by":"import"},{"issue_id":"wl-52","depends_on_id":"wl-50","type":"blocks","created_at":"2026-01-04T15:53:17.877275721-05:00","created_by":"import"},{"issue_id":"wl-52","depends_on_id":"wl-51","type":"blocks","created_at":"2026-01-04T15:53:17.879674944-05:00","created_by":"import"}]}
{"id":"wl-53","title":"Implement systemd user timers for worklog schedule install","description":"Context\n- Scheduling should use systemd user timers by default, with cron fallback handled elsewhere.\n\nWork\n- Add `worklog schedule install|uninstall|status` that manages systemd user units under ~/.config/systemd/user/.\n- Default install: all periods (daily/weekly/monthly/quarterly).\n- Support toggles: `--no-weekly --no-monthly --no-quarterly` (and optionally `--no-daily` if desired for completeness).\n- Units to create per enabled period:\n  - worklog-\u003cperiod\u003e.service (Type=oneshot; ExecStart=\u003cabsolute-path-to-worklog\u003e schedule run --period \u003cperiod\u003e; EnvironmentFile=%h/.config/worklog/worklog.env)\n  - worklog-\u003cperiod\u003e.timer (Persistent=true; OnCalendar per period)\n- OnCalendar schedules (09:00):\n  - daily: *-*-* 09:00:00\n  - weekly: Mon *-*-* 09:00:00\n  - monthly: *-*-01 09:00:00\n  - quarterly: *-01-01 09:00:00, *-04-01 09:00:00, *-07-01 09:00:00, *-10-01 09:00:00\n- Persist Slack webhook to ~/.config/worklog/worklog.env when provided via `worklog schedule install --slack \u003curl\u003e`.\n- Status should report which timers are installed/enabled and the next run time(s) (use `systemctl --user list-timers`).\n- Handle missing user systemd manager with a clear error/warning (and suggest next steps like checking `systemctl --user` works).\n\nVerification\n- Add pure string/unit tests for generated unit contents.\n- Run: bun test\n- Run: bun run lint:fix\n- Run: bun run check\n- Manual: worklog schedule install; systemctl --user list-timers | rg worklog","acceptance_criteria":"- schedule install creates and enables timers for enabled periods\n- schedule uninstall disables and removes installed units\n- schedule status accurately reports systemd timer state\n- Unit content generation is covered by tests\n- bun test passes; bun run check passes","notes":"Implemented systemd user timer backend for worklog schedule install/uninstall/status via src/scheduling/systemd.ts and src/scheduling/index.ts. Default installs daily/weekly/monthly/quarterly with --no-weekly/--no-monthly/--no-quarterly toggles. Writes env file for Slack and enables timers. Added unit tests. Verified: bun test, bun run lint:fix, bun run check.","status":"closed","priority":1,"issue_type":"feature","assignee":"justin","estimated_minutes":240,"created_at":"2026-01-04T13:05:08.855738639-05:00","created_by":"justin","updated_at":"2026-01-04T14:17:31.162940206-05:00","closed_at":"2026-01-04T14:17:31.162940206-05:00","dependencies":[{"issue_id":"wl-53","depends_on_id":"wl-52","type":"blocks","created_at":"2026-01-04T15:53:17.881153123-05:00","created_by":"import"}]}
{"id":"wl-54","title":"Add cron fallback backend for schedule install/status","description":"Context\n- Some systems may not support systemd user timers. In that case, scheduling should fall back to crontab management.\n\nWork\n- Implement cron fallback inside `worklog schedule install|uninstall|status` (do not require the old `worklog cron` CLI). Reuse/refactor existing code in src/cron.ts.\n- Default install: all periods (daily/weekly/monthly/quarterly).\n- Support toggles: `--no-weekly --no-monthly --no-quarterly`.\n- Cron schedules (09:00):\n  - daily: 0 9 * * *\n  - weekly: 0 9 * * 1\n  - monthly: 0 9 1 * *\n  - quarterly: 0 9 1 1,4,7,10 *\n- Each cron entry should call: \u003cworklog-path\u003e schedule run --period \u003cperiod\u003e\n- Use distinct markers per period so uninstall/status can manage them safely (e.g. # worklog-daily-standup, # worklog-weekly-standup, etc).\n\nVerification\n- Add unit tests for cron line generation for each period + toggle behavior.\n- Run: bun test\n- Run: bun run lint:fix\n- Run: bun run check","acceptance_criteria":"- schedule install falls back to crontab when systemd user mode is unavailable\n- Installs correct cron lines for enabled periods\n- schedule uninstall removes only worklog-managed cron lines\n- schedule status reports cron-installed periods\n- bun test passes; bun run check passes","notes":"Implemented cron fallback backend via src/scheduling/cron_fallback.ts and integrated into worklog schedule install/uninstall/status when systemd user mode unavailable. Added unit tests for cron line generation. Verified: bun test, bun run lint:fix, bun run check.","status":"closed","priority":2,"issue_type":"feature","assignee":"justin","estimated_minutes":180,"created_at":"2026-01-04T13:05:11.818395913-05:00","created_by":"justin","updated_at":"2026-01-04T14:17:31.207370143-05:00","closed_at":"2026-01-04T14:17:31.207370143-05:00","dependencies":[{"issue_id":"wl-54","depends_on_id":"wl-52","type":"blocks","created_at":"2026-01-04T15:53:17.883894799-05:00","created_by":"import"}]}
{"id":"wl-55","title":"Replace -D flag with worklog dashboard subcommand (auto port + snapshots)","description":"Context\n- Dashboard should no longer be a flag; it should be a discoverable subcommand that reads snapshot JSON files and serves a local web UI.\n\nWork\n- Remove root `-D/--dashboard` option and any references to it.\n- Add `worklog dashboard` subcommand.\n- Dashboard reads snapshots from ~/.local/share/worklog/{daily,weekly,monthly,quarterly}/ using wl-49 helpers.\n- Default selection when dashboard loads: daily + yesterday (fallback to latest available).\n- Provide APIs for the UI:\n  - GET /api/reports?period=daily|weekly|monthly|quarterly -\u003e list available snapshot keys\n  - GET /api/report?period=...\u0026key=... -\u003e load single snapshot\n  - GET /api/report-range?start=YYYY-MM-DD\u0026end=YYYY-MM-DD -\u003e aggregate daily snapshots across range\n- Server binds to localhost and picks an open port if 3000 is already in use; print final URL.\n- Apply global noise filter when serving/aggregating snapshots (so older snapshots with noise don’t show it).\n\nVerification\n- Run: bun run lint:fix\n- Run: bun run check\n- Manual: worklog dashboard (verify URL printed and API endpoints respond)","acceptance_criteria":"- worklog dashboard replaces -D flag\n- Auto-port selection works when 3000 is busy\n- APIs list/load/aggregate snapshots correctly\n- Default view selects yesterday daily snapshot\n- bun run check passes","notes":"Removed -D/--dashboard root flag and added worklog dashboard subcommand that serves from snapshot JSON files. Includes /api/reports, /api/report, /api/report-range endpoints, defaulting to yesterday daily snapshot, with auto-port selection when 3000 is busy. Verified: bun test, bun run lint:fix, bun run check.","status":"closed","priority":1,"issue_type":"feature","assignee":"justin","estimated_minutes":180,"created_at":"2026-01-04T13:05:14.592598383-05:00","created_by":"justin","updated_at":"2026-01-04T14:08:04.756020026-05:00","closed_at":"2026-01-04T14:08:04.756020026-05:00","dependencies":[{"issue_id":"wl-55","depends_on_id":"wl-49","type":"blocks","created_at":"2026-01-04T15:53:17.885361749-05:00","created_by":"import"},{"issue_id":"wl-55","depends_on_id":"wl-50","type":"blocks","created_at":"2026-01-04T15:53:17.887028712-05:00","created_by":"import"}]}
{"id":"wl-56","title":"Dashboard UI: daily range picker + period dropdown + prominent date display","description":"Update the dashboard UI so the user can: (1) pick a single daily report (date picker/dropdown); (2) pick a daily range and view aggregated results; (3) switch to weekly/monthly/quarterly and select a single snapshot from a dropdown. On load: daily + yesterday selected. The UI must prominently display what date/range is currently being visualized. Integrate with the dashboard server APIs (list/load/aggregate).","acceptance_criteria":"- Daily picker supports single-day selection and range aggregation\n- Weekly/monthly/quarterly dropdowns list available snapshots\n- A prominent \"Viewing: ...\" label is always visible\n- UI handles no-snapshots and empty states gracefully\n- bun run check passes; manual UI verification passes","notes":"Added snapshot selection UI to dashboard (period selector, daily day/range inputs, and non-daily snapshot dropdown) in src/utils/dashboard.ts. Uses /api/reports to populate keys and reloads page with query params to switch view; prominent VIEWING label always visible. Verified: bun test, bun run check.","status":"closed","priority":2,"issue_type":"feature","assignee":"justin","estimated_minutes":240,"created_at":"2026-01-04T13:05:19.036525186-05:00","created_by":"justin","updated_at":"2026-01-04T14:40:29.205927248-05:00","closed_at":"2026-01-04T14:40:29.205927248-05:00","dependencies":[{"issue_id":"wl-56","depends_on_id":"wl-55","type":"blocks","created_at":"2026-01-04T15:53:17.889203879-05:00","created_by":"import"}]}
{"id":"wl-57","title":"Remove legacy worklog cron command surface","description":"Context\n- Scheduling is now handled by `worklog schedule ...` (systemd-first with cron fallback). The old `worklog cron ...` CLI should be removed to avoid confusion.\n\nWork\n- Remove the `worklog cron` commander subcommand surface from bin/worklog.ts.\n- Ensure any required crontab logic remains accessible internally for schedule fallback (wl-54).\n- Update README to document `worklog schedule` instead of `worklog cron`.\n\nVerification\n- Run: bun run lint:fix\n- Run: bun run check\n- Manual: worklog --help (cron commands gone; schedule commands present)","acceptance_criteria":"- worklog cron no longer appears in --help\n- README references schedule instead of cron\n- bun run check passes","notes":"Removed legacy worklog cron command surface from bin/worklog.ts; updated README to document worklog schedule instead; updated bash completion to drop cron completions. Verified: bun test, bun run lint:fix, bun run check.","status":"closed","priority":2,"issue_type":"chore","assignee":"justin","estimated_minutes":60,"created_at":"2026-01-04T13:05:21.833166614-05:00","created_by":"justin","updated_at":"2026-01-04T14:26:59.054655536-05:00","closed_at":"2026-01-04T14:26:29.342337936-05:00","dependencies":[{"issue_id":"wl-57","depends_on_id":"wl-52","type":"blocks","created_at":"2026-01-04T15:53:17.891294276-05:00","created_by":"import"},{"issue_id":"wl-57","depends_on_id":"wl-53","type":"blocks","created_at":"2026-01-04T15:53:17.893548151-05:00","created_by":"import"},{"issue_id":"wl-57","depends_on_id":"wl-54","type":"blocks","created_at":"2026-01-04T15:53:17.895511001-05:00","created_by":"import"}]}
{"id":"wl-58","title":"Fix snapshot timing bugs (Epic)","description":"Daily snapshots are missing events that occur after generation time but before end of day. This causes weekly/monthly/quarterly aggregates to have MORE events than sum of dailies.\n\nRoot Cause: Daily snapshots run at 5pm but try to capture 5am-5am UTC range, missing 12 hours of events.\n\nSolution: Run snapshots at 12:05am local time to capture complete previous day.\n\nThis epic tracks both prospective fixes (Option A) and retroactive fixes (Option B).","status":"closed","priority":0,"issue_type":"epic","estimated_minutes":480,"created_at":"2026-01-04T15:06:49.174779204-05:00","created_by":"justin","updated_at":"2026-01-04T17:35:43.790681046-05:00","closed_at":"2026-01-04T17:35:43.790681046-05:00","close_reason":"All snapshot timing bug tasks completed"}
{"id":"wl-59","title":"Add timezone configuration to config.json","description":"GOAL: Add explicit timezone configuration instead of hardcoded UTC offset.\n\nCONTEXT: Currently uses 5am UTC offset which was meant to compensate for EST (UTC-5). Need explicit timezone config.\n\nTASKS:\n1. Add 'timezone' field to config schema in src/types.ts\n2. Update src/utils/config.ts to read timezone (default: system timezone)\n3. Add Zod validation for timezone field\n4. Document in README.md config section\n\nFILES TO MODIFY:\n- src/types.ts (add timezone to WorklogConfig interface)\n- src/utils/config.ts (add timezone handling)\n- README.md (document timezone config)\n\nTESTS TO RUN:\n```bash\n# 1. Run type check\nbun run typecheck\n\n# 2. Test reading config with timezone\necho '{\"timezone\": \"America/New_York\"}' \u003e /tmp/test-config.json\nbun --eval \"import { loadConfig } from './src/utils/config.ts'; console.log(await loadConfig('/tmp/test-config.json'));\"\n\n# 3. Verify default to system timezone\nbun --eval \"import { loadConfig } from './src/utils/config.ts'; const cfg = await loadConfig(); console.log('Timezone:', cfg.timezone || Intl.DateTimeFormat().resolvedOptions().timeZone);\"\n```\n\nDONE WHEN:\n- Config has timezone field\n- Defaults to system timezone if not specified\n- Type checks pass\n- All 3 test commands succeed","notes":"Added timezone config support (config.json + WORKLOG_TIMEZONE env override) with validation. loadConfig now defaults timezone to system timezone if missing. Updated README example and added tests in src/utils/config.test.ts. Verified: bun test, bun run check.","status":"closed","priority":1,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":60,"created_at":"2026-01-04T15:07:01.139777325-05:00","created_by":"justin","updated_at":"2026-01-04T15:54:18.235348625-05:00","closed_at":"2026-01-04T15:54:18.235356534-05:00","dependencies":[{"issue_id":"wl-59","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.897181067-05:00","created_by":"import"}]}
{"id":"wl-59f","title":"Additional Features Epic","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-04T23:05:09.99215783-05:00","created_by":"justin","updated_at":"2026-01-04T23:05:09.99215783-05:00"}
{"id":"wl-60","title":"Fix date range calculation to use user timezone","description":"GOAL: Update parseDateRange() to use user's configured timezone instead of hardcoded UTC offset.\n\nCONTEXT: src/utils/dates.ts uses hardcoded 5am UTC offset. Should use configured timezone.\n\nCURRENT BEHAVIOR (BUGGY):\n- startOfDay returns 5am UTC\n- endOfDay returns 4:59:59am UTC next day\n- This creates 24-hour window but offset from user's midnight\n\nEXPECTED BEHAVIOR:\n- startOfDay returns midnight in user's local timezone\n- endOfDay returns 23:59:59 in user's local timezone\n\nTASKS:\n1. Update parseOptions() in src/utils/dates.ts to accept timezone parameter\n2. Modify startOfDay/endOfDay logic to use timezone\n3. Use date-fns-tz for timezone conversions\n4. Update all callers to pass config.timezone\n\nFILES TO MODIFY:\n- src/utils/dates.ts (core date range logic)\n- package.json (add date-fns-tz dependency if not present)\n\nDEPENDENCIES:\n- Requires wl-59 (timezone config) to be completed first\n\nTESTS TO RUN:\n```bash\n# 1. Run existing date tests\nbun test src/utils/dates.test.ts\n\n# 2. Manual test: yesterday in EST\nbun --eval \"\nimport { parseDateRange } from './src/utils/dates.ts';\nconst range = parseDateRange({ yesterday: true }, new Date('2025-12-24T10:00:00-05:00'));\nconsole.log('Start:', range.start.toISOString());\nconsole.log('End:', range.end.toISOString());\nconsole.log('Expected start: 2025-12-23T05:00:00.000Z (midnight EST)');\nconsole.log('Expected end: 2025-12-24T04:59:59.999Z (23:59:59 EST)');\n\"\n\n# 3. Run type check\nbun run typecheck\n```\n\nDONE WHEN:\n- startOfDay/endOfDay use user timezone\n- All date tests pass\n- Manual test shows correct midnight boundaries\n- Type checks pass","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2026-01-04T15:07:18.803011464-05:00","created_by":"justin","updated_at":"2026-01-04T17:03:57.64279753-05:00","closed_at":"2026-01-04T17:03:57.64279753-05:00","close_reason":"Completed by commit 546bec9 (timezone-aware date ranges)","dependencies":[{"issue_id":"wl-60","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.900185634-05:00","created_by":"import"},{"issue_id":"wl-60","depends_on_id":"wl-59","type":"blocks","created_at":"2026-01-04T15:53:17.902530095-05:00","created_by":"import"},{"issue_id":"wl-60","depends_on_id":"wl-72","type":"blocks","created_at":"2026-01-04T15:53:17.904398156-05:00","created_by":"import"}]}
{"id":"wl-61","title":"Update computePreviousPeriodDateRange to use correct timezone","description":"GOAL: Fix computePreviousPeriodDateRange in src/schedule.ts to use user's timezone.\n\nCONTEXT: Currently calls parseDateRange with referenceNow but doesn't pass timezone config.\n\nBUG: When daily snapshot runs at 5pm, it computes 'yesterday' which is the previous calendar day, but the snapshot is supposed to capture events from the JUST-COMPLETED period.\n\nTASKS:\n1. Add timezone parameter to computePreviousPeriodDateRange()\n2. Pass timezone through to parseDateRange()\n3. Update all callers (scheduleRun) to pass config.timezone\n\nFILES TO MODIFY:\n- src/schedule.ts (computePreviousPeriodDateRange and scheduleRun)\n\nDEPENDENCIES:\n- Requires wl-60 (date range timezone fix) to be completed\n\nTESTS TO RUN:\n```bash\n# 1. Run schedule tests\nbun test src/schedule.test.ts\n\n# 2. Manual test at different times\nbun --eval \"\nimport { computePreviousPeriodDateRange } from './src/schedule.ts';\n\n// Simulate running at 12:05am on Dec 24\nconst range = computePreviousPeriodDateRange('daily', new Date('2025-12-24T00:05:00-05:00'));\nconsole.log('Running at: 2025-12-24 12:05am EST');\nconsole.log('Should capture: Dec 23 midnight to 23:59:59');\nconsole.log('Start:', range.start.toISOString());\nconsole.log('End:', range.end.toISOString());\n\"\n\n# 3. Type check\nbun run typecheck\n```\n\nDONE WHEN:\n- Function accepts timezone parameter\n- Passes timezone to parseDateRange\n- Tests pass\n- Manual test shows correct previous day range","status":"closed","priority":1,"issue_type":"task","estimated_minutes":45,"created_at":"2026-01-04T15:07:34.583028226-05:00","created_by":"justin","updated_at":"2026-01-04T17:03:57.710641801-05:00","closed_at":"2026-01-04T17:03:57.710641801-05:00","close_reason":"Completed by commit 546bec9 (timezone passed into schedule date ranges)","dependencies":[{"issue_id":"wl-61","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.905786431-05:00","created_by":"import"},{"issue_id":"wl-61","depends_on_id":"wl-60","type":"blocks","created_at":"2026-01-04T15:53:17.907113775-05:00","created_by":"import"}]}
{"id":"wl-62","title":"Change systemd timer to run at 12:05am local time","description":"GOAL: Update systemd timer configuration to run daily snapshots at 12:05am instead of 9am.\n\nCONTEXT: Daily snapshots should run AFTER midnight to capture the complete previous day.\n\nCURRENT: Runs at 09:00 (9am)\nTARGET: Runs at 00:05 (12:05am)\n\nTASKS:\n1. Update OnCalendar in src/scheduling/systemd.ts for daily timer\n2. Test timer generation\n3. Document timing in comments\n\nFILES TO MODIFY:\n- src/scheduling/systemd.ts (SYSTEMD_TIMER_CONFIGS.daily.OnCalendar)\n\nDEPENDENCIES:\n- Should be done AFTER wl-61 (date range fix) so new timing uses correct logic\n\nTESTS TO RUN:\n```bash\n# 1. Generate systemd files and check timing\nbun run dev schedule install\ncat ~/.config/systemd/user/worklog-daily.timer | grep OnCalendar\n# Should show: OnCalendar=*-*-* 00:05:00\n\n# 2. Check all period timers\nfor period in daily weekly monthly quarterly; do\n  echo \"=== $period ===\"\n  cat ~/.config/systemd/user/worklog-${period}.timer | grep OnCalendar\ndone\n\n# 3. Verify service files exist\nls -la ~/.config/systemd/user/worklog-*.{timer,service}\n\n# 4. Run systemd tests\nbun test src/scheduling/systemd.test.ts\n```\n\nDONE WHEN:\n- daily timer runs at 00:05:00\n- weekly runs at 00:05:00 Monday (or configured day)\n- monthly runs at 00:05:00 on 1st\n- quarterly runs at 00:05:00 on quarter start\n- Tests pass","status":"closed","priority":1,"issue_type":"task","estimated_minutes":30,"created_at":"2026-01-04T15:07:50.006133247-05:00","created_by":"justin","updated_at":"2026-01-04T17:05:29.960923166-05:00","closed_at":"2026-01-04T17:05:29.960923166-05:00","close_reason":"Updated systemd timers to run at 00:05 local","dependencies":[{"issue_id":"wl-62","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.908629073-05:00","created_by":"import"},{"issue_id":"wl-62","depends_on_id":"wl-61","type":"blocks","created_at":"2026-01-04T15:53:17.910510336-05:00","created_by":"import"}]}
{"id":"wl-63","title":"Change cron fallback to run at 12:05am local time","description":"GOAL: Update cron fallback timer to run at 12:05am instead of 9am.\n\nCONTEXT: Systems without systemd use cron. Should match systemd timing.\n\nCURRENT DEFAULT: 09:00 (9am)\nTARGET DEFAULT: 00:05 (12:05am)\n\nTASKS:\n1. Change DEFAULT_HOUR in src/cron.ts from 9 to 0\n2. Change DEFAULT_MINUTE in src/cron.ts from 0 to 5\n3. Update help text to show new default time\n\nFILES TO MODIFY:\n- src/cron.ts (DEFAULT_HOUR and DEFAULT_MINUTE constants)\n\nDEPENDENCIES:\n- Should be done alongside wl-62 (systemd timer) for consistency\n\nTESTS TO RUN:\n```bash\n# 1. Check cron line generation\nbun --eval \"\nimport { buildCronLine } from './src/cron.ts';\nconst line = buildCronLine({ hour: 0, minute: 5, outputDir: '/tmp/test' });\nconsole.log('Cron line:', line);\nconsole.log('Expected to start with: 5 0 * * *');\n\"\n\n# 2. Install and check crontab (WARNING: modifies crontab)\n# bun run dev cron install --time 00:05\n# crontab -l | grep worklog\n\n# 3. Run cron tests\nbun test src/cron.test.ts\n\n# 4. Type check\nbun run typecheck\n```\n\nDONE WHEN:\n- DEFAULT_HOUR = 0\n- DEFAULT_MINUTE = 5\n- Cron line shows '5 0 * * *' (minute hour day month dow)\n- Tests pass","status":"closed","priority":1,"issue_type":"task","estimated_minutes":20,"created_at":"2026-01-04T15:08:04.083557252-05:00","created_by":"justin","updated_at":"2026-01-04T17:06:50.426329812-05:00","closed_at":"2026-01-04T17:06:50.426329812-05:00","close_reason":"Updated cron fallback to run at 00:05 local","dependencies":[{"issue_id":"wl-63","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.912210588-05:00","created_by":"import"},{"issue_id":"wl-63","depends_on_id":"wl-61","type":"blocks","created_at":"2026-01-04T15:53:17.914486197-05:00","created_by":"import"}]}
{"id":"wl-64","title":"Add snapshot verification command","description":"GOAL: Add 'worklog snapshot verify' command to detect inconsistencies between daily and weekly/monthly snapshots.\n\nCONTEXT: Need to identify which snapshots have missing data due to timing bug.\n\nVERIFICATION CHECKS:\n1. Sum of daily snapshot items vs weekly snapshot items\n2. Date range consistency (daily ranges should cover weekly range)\n3. No gaps in daily snapshots within a weekly period\n4. Timestamp validation (all items fall within declared date range)\n\nTASKS:\n1. Add 'verify' subcommand to bin/worklog.ts\n2. Create verification logic in src/storage/snapshots.ts\n3. Report discrepancies with details\n4. Add --fix flag for future auto-repair\n\nFILES TO CREATE/MODIFY:\n- bin/worklog.ts (add verify subcommand)\n- src/storage/snapshots.ts (add verifySnapshots function)\n\nEXAMPLE OUTPUT:\n```\n✓ Verifying snapshots...\n\nWeekly 2025-12-22:\n  ✗ Has 147 items but dailies sum to 145 (2 missing)\n  ✗ Missing items found in these date ranges:\n    - 2025-12-23 17:00 to 2025-12-24 05:00 (1 item)\n    - 2025-12-24 17:00 to 2025-12-25 05:00 (1 item)\n\nFound 1 inconsistent weekly snapshot\nRun 'worklog snapshot regenerate --week 2025-12-22' to fix\n```\n\nTESTS TO RUN:\n```bash\n# 1. Run on known bad data\nbun run dev snapshot verify\n# Should report discrepancy for week 2025-12-22\n\n# 2. Test JSON output\nbun run dev snapshot verify --json | jq .\n\n# 3. Run tests\nbun test src/storage/snapshots.test.ts\n\n# 4. Type check\nbun run typecheck\n```\n\nDONE WHEN:\n- Command detects known inconsistencies\n- Reports clear, actionable output\n- JSON mode works\n- Tests pass","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2026-01-04T15:08:19.790579729-05:00","created_by":"justin","updated_at":"2026-01-04T17:26:05.708253953-05:00","closed_at":"2026-01-04T17:26:05.708253953-05:00","close_reason":"Added snapshot verify command and verification logic","dependencies":[{"issue_id":"wl-64","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.91683474-05:00","created_by":"import"}]}
{"id":"wl-65","title":"Write comprehensive tests for snapshot timing","description":"GOAL: Add tests that verify snapshots capture complete date ranges regardless of generation time.\n\nCONTEXT: Need regression tests to prevent timing bugs from recurring.\n\nTEST SCENARIOS:\n1. Daily snapshot generated at midnight captures previous full day\n2. Daily snapshot generated at 11:59pm captures current full day  \n3. Weekly snapshot aggregates exactly 7 complete days\n4. Monthly snapshot covers all days in month\n5. Quarterly snapshot covers all days in quarter\n6. Snapshots in different timezones work correctly\n\nTASKS:\n1. Add test file: src/storage/snapshots.timing.test.ts\n2. Mock date/time for controlled testing\n3. Test edge cases (DST transitions, leap years, etc)\n4. Test timezone boundaries\n\nFILES TO CREATE:\n- src/storage/snapshots.timing.test.ts\n\nEXAMPLE TEST:\n```typescript\nimport { test, expect } from 'bun:test';\nimport { computePreviousPeriodDateRange } from '../schedule.ts';\n\ntest('daily snapshot at midnight captures previous full day', () =\u003e {\n  // Running at 12:05am Dec 24 EST\n  const now = new Date('2025-12-24T00:05:00-05:00');\n  const range = computePreviousPeriodDateRange('daily', now);\n  \n  // Should capture Dec 23 midnight to 23:59:59\n  expect(range.start.toISOString()).toBe('2025-12-23T05:00:00.000Z'); // midnight EST\n  expect(range.end.toISOString()).toBe('2025-12-24T04:59:59.999Z'); // 23:59:59 EST\n});\n```\n\nTESTS TO RUN:\n```bash\n# 1. Run new timing tests\nbun test src/storage/snapshots.timing.test.ts\n\n# 2. Run all snapshot tests\nbun test src/storage/\n\n# 3. Run all tests\nbun test\n\n# 4. Type check\nbun run typecheck\n```\n\nDONE WHEN:\n- At least 10 timing tests written\n- All edge cases covered\n- Tests pass\n- Code coverage \u003e 90% for snapshot timing logic","status":"closed","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2026-01-04T15:08:34.014999147-05:00","created_by":"justin","updated_at":"2026-01-04T17:27:45.063870354-05:00","closed_at":"2026-01-04T17:27:45.063870354-05:00","close_reason":"Added snapshot timing regression tests","dependencies":[{"issue_id":"wl-65","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.918434957-05:00","created_by":"import"},{"issue_id":"wl-65","depends_on_id":"wl-61","type":"blocks","created_at":"2026-01-04T15:53:17.91974987-05:00","created_by":"import"}]}
{"id":"wl-66","title":"Update documentation for snapshot timing","description":"GOAL: Document the snapshot timing behavior and timezone configuration in README.md.\n\nCONTEXT: Users need to understand when snapshots run and what data they capture.\n\nDOCUMENTATION UPDATES:\n1. Add 'Snapshot Timing' section to README\n2. Explain daily/weekly/monthly/quarterly schedules\n3. Document timezone configuration\n4. Add troubleshooting section for timing issues\n5. Update schedule command examples\n\nCONTENT TO ADD:\n```markdown\n## Snapshot Timing\n\nSnapshots run at these times (local timezone):\n- **Daily**: 12:05am (captures previous calendar day)\n- **Weekly**: 12:05am Monday (captures previous Sun-Sat)\n- **Monthly**: 12:05am 1st of month (captures previous month)\n- **Quarterly**: 12:05am 1st day of quarter (captures previous quarter)\n\n### Timezone Configuration\n\nBy default, worklog uses your system timezone. To override:\n\n\\`\\`\\`json\n{\n  \"timezone\": \"America/New_York\"\n}\n\\`\\`\\`\n\nValid timezone names: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\n```\n\nFILES TO MODIFY:\n- README.md (add Snapshot Timing section)\n- docs/ (if exists, update architecture docs)\n\nDEPENDENCIES:\n- Should be done AFTER all timing fixes are complete\n\nTESTS TO RUN:\n```bash\n# 1. Verify markdown rendering\nnpx markdown-link-check README.md\n\n# 2. Check for broken links\ngrep -r 'http' README.md | cut -d: -f2- | xargs -I {} curl -s -o /dev/null -w \"%{http_code} {}\\n\" {}\n\n# 3. Spell check (if available)\naspell check README.md || echo 'aspell not installed, skipping'\n```\n\nDONE WHEN:\n- README has Snapshot Timing section\n- Timezone config documented\n- Examples updated\n- No broken links\n- Markdown renders correctly","status":"closed","priority":3,"issue_type":"task","estimated_minutes":45,"created_at":"2026-01-04T15:08:49.87400933-05:00","created_by":"justin","updated_at":"2026-01-04T17:35:16.79465941-05:00","closed_at":"2026-01-04T17:35:16.79465941-05:00","close_reason":"Updated README with snapshot timing and maintenance commands","dependencies":[{"issue_id":"wl-66","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.921135302-05:00","created_by":"import"},{"issue_id":"wl-66","depends_on_id":"wl-62","type":"blocks","created_at":"2026-01-04T15:53:17.922583268-05:00","created_by":"import"},{"issue_id":"wl-66","depends_on_id":"wl-63","type":"blocks","created_at":"2026-01-04T15:53:17.924381372-05:00","created_by":"import"}]}
{"id":"wl-67","title":"Design snapshot regeneration algorithm","description":"GOAL: Design the algorithm for regenerating daily snapshots from weekly/monthly snapshots.\n\nCONTEXT: Historical daily snapshots are incomplete due to timing bug. Need to split weekly/monthly snapshots back into correct daily ranges.\n\nALGORITHM REQUIREMENTS:\n1. Identify which daily snapshots need regeneration\n2. Find corresponding weekly/monthly snapshot\n3. Filter weekly/monthly items by daily date range\n4. Write regenerated daily snapshot\n5. Handle edge cases (missing weekly, partial data, etc)\n\nDESIGN DECISIONS:\n1. Should we preserve original snapshot as .bak?\n2. What if weekly is also incomplete?\n3. How to handle conflicts (different sources reported different data)?\n4. Dry-run mode?\n\nTASKS:\n1. Document algorithm in design doc\n2. Create flowchart or pseudocode\n3. Identify edge cases\n4. Get review/approval before implementation\n\nFILES TO CREATE:\n- docs/snapshot-regeneration-design.md\n\nEXAMPLE ALGORITHM:\n```\nFor each daily snapshot:\n  1. Load daily snapshot\n  2. Count items\n  3. Find corresponding weekly snapshot\n  4. Count items in weekly for that day's date range\n  5. If counts differ:\n    - Extract items from weekly for that day\n    - Backup original daily as .bak\n    - Write new daily with weekly items\n    - Log regeneration\n  6. Verify new daily is complete\n```\n\nTESTS TO RUN:\n```bash\n# 1. Review design doc\ncat docs/snapshot-regeneration-design.md\n\n# 2. Check for edge cases\ngrep -i 'edge case' docs/snapshot-regeneration-design.md\n\n# 3. Validate markdown\nnpx markdown-link-check docs/snapshot-regeneration-design.md\n```\n\nDONE WHEN:\n- Design doc exists\n- Algorithm clearly documented\n- Edge cases identified\n- Reviewer approved (can be self-approval for now)","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2026-01-04T15:09:06.612968218-05:00","created_by":"justin","updated_at":"2026-01-04T17:08:55.619994552-05:00","closed_at":"2026-01-04T17:08:55.619994552-05:00","close_reason":"Added snapshot regeneration design doc","dependencies":[{"issue_id":"wl-67","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.926203612-05:00","created_by":"import"}]}
{"id":"wl-68","title":"Implement regenerateDailyFromWeekly function","description":"GOAL: Implement function to regenerate a single daily snapshot from its weekly parent.\n\nCONTEXT: Core logic for extracting daily data from weekly snapshot.\n\nFUNCTION SIGNATURE:\n```typescript\nexport async function regenerateDailyFromWeekly(\n  dailyKey: string,\n  options: {\n    dryRun?: boolean;\n    backup?: boolean;\n    rootDir?: string;\n  }\n): Promise\u003cRegenerationResult\u003e\n\ninterface RegenerationResult {\n  dailyKey: string;\n  originalItems: number;\n  newItems: number;\n  itemsAdded: number;\n  backedUp: boolean;\n  success: boolean;\n  error?: string;\n}\n```\n\nTASKS:\n1. Add function to src/storage/snapshots.ts\n2. Load daily snapshot\n3. Find corresponding weekly snapshot\n4. Extract items for daily date range from weekly\n5. Backup original if requested\n6. Write new daily snapshot\n7. Return detailed result\n\nFILES TO MODIFY:\n- src/storage/snapshots.ts\n\nDEPENDENCIES:\n- Requires wl-67 (design) to be approved\n\nERROR HANDLING:\n- Weekly snapshot not found → return error\n- Daily snapshot not found → create from weekly\n- Write failure → restore backup\n\nTESTS TO RUN:\n```bash\n# 1. Unit test with mock data\nbun test src/storage/snapshots.test.ts -t 'regenerateDailyFromWeekly'\n\n# 2. Integration test with real data\nbun --eval \"\nimport { regenerateDailyFromWeekly } from './src/storage/snapshots.ts';\n\nconst result = await regenerateDailyFromWeekly('2025-12-23', {\n  dryRun: true,\n  backup: true\n});\n\nconsole.log('Dry run result:', JSON.stringify(result, null, 2));\nconsole.log('Expected: originalItems=12, newItems=13, itemsAdded=1');\n\"\n\n# 3. Test backup creation\nbun --eval \"\nimport { regenerateDailyFromWeekly } from './src/storage/snapshots.ts';\nimport { existsSync } from 'fs';\n\nawait regenerateDailyFromWeekly('2025-12-23', { backup: true });\nconst backupExists = existsSync('~/.local/share/worklog/daily/standup-2025-12-23.json.bak');\nconsole.log('Backup created:', backupExists);\n\"\n\n# 4. Type check\nbun run typecheck\n```\n\nDONE WHEN:\n- Function implemented\n- Handles all edge cases\n- Unit tests pass\n- Integration test shows correct regeneration\n- Type checks pass","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2026-01-04T15:09:26.060568844-05:00","created_by":"justin","updated_at":"2026-01-04T17:14:41.031904056-05:00","closed_at":"2026-01-04T17:14:41.031904056-05:00","close_reason":"Implemented regenerateDailyFromWeekly and tests","dependencies":[{"issue_id":"wl-68","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.927587899-05:00","created_by":"import"},{"issue_id":"wl-68","depends_on_id":"wl-67","type":"blocks","created_at":"2026-01-04T15:53:17.929282432-05:00","created_by":"import"}]}
{"id":"wl-69","title":"Add 'worklog snapshot regenerate' CLI command","description":"GOAL: Add CLI command to regenerate snapshots from parent periods.\n\nCONTEXT: User-facing command to fix historical data.\n\nCOMMAND SYNTAX:\n```bash\nworklog snapshot regenerate [options]\n\nOptions:\n  --daily \u003cYYYY-MM-DD\u003e     Regenerate specific daily snapshot\n  --week \u003cYYYY-MM-DD\u003e      Regenerate all dailies in week\n  --month \u003cYYYY-MM\u003e        Regenerate all dailies in month\n  --all                    Regenerate all incomplete dailies\n  --dry-run                Show what would be done\n  --no-backup              Don't backup originals\n  --force                  Overwrite even if daily appears complete\n  -v, --verbose            Detailed output\n```\n\nTASKS:\n1. Add 'snapshot' command group to bin/worklog.ts\n2. Add 'regenerate' subcommand\n3. Parse options\n4. Call regenerateDailyFromWeekly for each target\n5. Show progress and results\n6. Handle errors gracefully\n\nFILES TO MODIFY:\n- bin/worklog.ts (add snapshot regenerate command)\n\nDEPENDENCIES:\n- Requires wl-68 (regeneration function)\n\nEXAMPLE OUTPUT:\n```\nRegenerating snapshots...\n\n✓ 2025-12-22: 37 → 37 items (no change)\n✓ 2025-12-23: 12 → 13 items (+1, backed up)\n✓ 2025-12-24: 5 → 7 items (+2, backed up)\n✓ 2025-12-25: 6 → 6 items (no change)\n✓ 2025-12-26: 71 → 89 items (+18, backed up)\n✓ 2025-12-27: 14 → 16 items (+2, backed up)\n✓ 2025-12-28: 0 → 0 items (no change)\n\nRegenerated 7 daily snapshots\nAdded 23 missing items\nBacked up 4 originals to *.json.bak\n```\n\nTESTS TO RUN:\n```bash\n# 1. Dry run mode\nbun run dev snapshot regenerate --week 2025-12-22 --dry-run\n# Should show what would change without modifying files\n\n# 2. Regenerate single day\nbun run dev snapshot regenerate --daily 2025-12-23 --verbose\n\n# 3. Verify regenerated snapshot\njq '.items | length' ~/.local/share/worklog/daily/standup-2025-12-23.json\n# Should show increased count\n\n# 4. Check backup exists\nls -la ~/.local/share/worklog/daily/standup-2025-12-23.json.bak\n\n# 5. Help text\nbun run dev snapshot regenerate --help\n\n# 6. Type check\nbun run typecheck\n```\n\nDONE WHEN:\n- Command implemented\n- All options work\n- Progress output clear\n- Help text accurate\n- Tests pass","status":"closed","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2026-01-04T15:09:46.439202121-05:00","created_by":"justin","updated_at":"2026-01-04T17:26:05.773360843-05:00","closed_at":"2026-01-04T17:26:05.773360843-05:00","close_reason":"Added snapshot regenerate command","dependencies":[{"issue_id":"wl-69","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.931466801-05:00","created_by":"import"},{"issue_id":"wl-69","depends_on_id":"wl-68","type":"blocks","created_at":"2026-01-04T15:53:17.933369555-05:00","created_by":"import"}]}
{"id":"wl-70","title":"Add integration test for end-to-end snapshot workflow","description":"GOAL: Create integration test that validates entire snapshot generation and regeneration workflow.\n\nCONTEXT: Need end-to-end test to ensure timing fixes work correctly in real usage.\n\nTEST SCENARIOS:\n1. Generate daily snapshot at midnight → verify it captures previous day\n2. Generate weekly snapshot → verify it aggregates 7 complete days\n3. Detect incomplete daily → regenerate from weekly → verify fixed\n4. Run schedule command → verify snapshots created correctly\n5. Test across timezone boundaries\n\nTASKS:\n1. Create test file: src/integration/snapshot-workflow.test.ts\n2. Set up test fixtures (mock data sources)\n3. Mock system time for controlled testing\n4. Test complete workflow from generation to regeneration\n5. Verify file system operations (backups, overwrites)\n\nFILES TO CREATE:\n- src/integration/snapshot-workflow.test.ts\n- test/fixtures/snapshot-test-data.json (if needed)\n\nEXAMPLE TEST:\n```typescript\nimport { test, expect } from 'bun:test';\nimport { scheduleRun } from '../schedule.ts';\nimport { regenerateDailyFromWeekly } from '../storage/snapshots.ts';\n\ntest('complete snapshot workflow', async () =\u003e {\n  const testDir = '/tmp/worklog-test-' + Date.now();\n  \n  // 1. Generate daily at midnight\n  const dailyResult = await scheduleRun({\n    period: 'daily',\n    rootDir: testDir,\n    now: new Date('2025-12-24T00:05:00-05:00')\n  }, deps);\n  \n  expect(dailyResult.snapshot.key).toBe('2025-12-23');\n  expect(dailyResult.itemsCount).toBeGreaterThan(0);\n  \n  // 2. Generate weekly later\n  const weeklyResult = await scheduleRun({\n    period: 'weekly',\n    rootDir: testDir,\n    now: new Date('2025-12-30T00:05:00-05:00')\n  }, deps);\n  \n  // 3. Verify weekly has more items than daily\n  const daily = await loadSnapshot('daily', '2025-12-23', testDir);\n  const weekly = await loadSnapshot('weekly', '2025-12-22', testDir);\n  const weeklyItemsForDay = weekly.items.filter(/* date range */);\n  \n  expect(weeklyItemsForDay.length).toBeGreaterThan(daily.items.length);\n  \n  // 4. Regenerate daily from weekly\n  const regenResult = await regenerateDailyFromWeekly('2025-12-23', {\n    rootDir: testDir,\n    backup: true\n  });\n  \n  expect(regenResult.newItems).toBe(weeklyItemsForDay.length);\n  \n  // Cleanup\n  await rm(testDir, { recursive: true });\n});\n```\n\nTESTS TO RUN:\n```bash\n# 1. Run integration tests\nbun test src/integration/\n\n# 2. Run with verbose output\nbun test src/integration/snapshot-workflow.test.ts --verbose\n\n# 3. Check test coverage\nbun test --coverage src/integration/\n\n# 4. Type check\nbun run typecheck\n```\n\nDONE WHEN:\n- Integration test file exists\n- At least 3 workflow scenarios tested\n- Tests pass\n- Test cleanup works (no leftover files)\n- Code coverage \u003e 80%","status":"closed","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2026-01-04T15:10:10.512905911-05:00","created_by":"justin","updated_at":"2026-01-04T17:31:12.569978177-05:00","closed_at":"2026-01-04T17:31:12.569978177-05:00","close_reason":"Added integration test for snapshot workflow","dependencies":[{"issue_id":"wl-70","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.934785817-05:00","created_by":"import"},{"issue_id":"wl-70","depends_on_id":"wl-69","type":"blocks","created_at":"2026-01-04T15:53:17.936402418-05:00","created_by":"import"},{"issue_id":"wl-70","depends_on_id":"wl-62","type":"blocks","created_at":"2026-01-04T15:53:17.938019808-05:00","created_by":"import"}]}
{"id":"wl-71","title":"Write migration guide for users with existing snapshots","description":"GOAL: Document how users should migrate from old timing to new timing.\n\nCONTEXT: Users with existing snapshots need clear instructions to fix their data.\n\nMIGRATION GUIDE SECTIONS:\n1. Overview of the bug and fix\n2. How to check if you're affected\n3. Step-by-step migration instructions\n4. Rollback procedure if something goes wrong\n5. FAQ\n\nTASKS:\n1. Create docs/snapshot-migration-guide.md\n2. Write clear, actionable steps\n3. Include examples and expected output\n4. Add to README with link\n\nFILES TO CREATE:\n- docs/snapshot-migration-guide.md\n\nEXAMPLE CONTENT:\n```markdown\n# Snapshot Migration Guide\n\n## Are You Affected?\n\nRun this command to check:\n\\`\\`\\`bash\nworklog snapshot verify\n\\`\\`\\`\n\nIf you see discrepancies, your snapshots are affected.\n\n## Migration Steps\n\n### 1. Backup Your Data\n\\`\\`\\`bash\ncp -r ~/.local/share/worklog ~/.local/share/worklog.backup\n\\`\\`\\`\n\n### 2. Regenerate Daily Snapshots\n\\`\\`\\`bash\n# Dry run first to see what will change\nworklog snapshot regenerate --all --dry-run\n\n# Actually regenerate\nworklog snapshot regenerate --all\n\\`\\`\\`\n\n### 3. Update Schedule\n\\`\\`\\`bash\n# Uninstall old schedule\nworklog schedule uninstall\n\n# Install new schedule (runs at 12:05am)\nworklog schedule install\n\\`\\`\\`\n\n### 4. Verify\n\\`\\`\\`bash\nworklog snapshot verify\n\\`\\`\\`\n\nShould show no discrepancies.\n\n## Rollback\n\nIf something goes wrong:\n\\`\\`\\`bash\nrm -rf ~/.local/share/worklog\nmv ~/.local/share/worklog.backup ~/.local/share/worklog\n\\`\\`\\`\n```\n\nFILES TO MODIFY:\n- README.md (add link to migration guide)\n\nDEPENDENCIES:\n- Should be done AFTER all commands are implemented\n\nTESTS TO RUN:\n```bash\n# 1. Follow migration guide yourself\ncat docs/snapshot-migration-guide.md\n\n# 2. Check markdown\nnpx markdown-link-check docs/snapshot-migration-guide.md\n\n# 3. Verify all commands in guide work\n# (manually test each command)\n\n# 4. Check README link\ngrep -i migration README.md\n```\n\nDONE WHEN:\n- Migration guide exists\n- Clear step-by-step instructions\n- All commands tested\n- README links to guide\n- Markdown validates","status":"closed","priority":3,"issue_type":"task","estimated_minutes":45,"created_at":"2026-01-04T15:10:30.513307738-05:00","created_by":"justin","updated_at":"2026-01-04T17:35:16.907428769-05:00","closed_at":"2026-01-04T17:35:16.907428769-05:00","close_reason":"Added snapshot migration guide","dependencies":[{"issue_id":"wl-71","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.939341273-05:00","created_by":"import"},{"issue_id":"wl-71","depends_on_id":"wl-69","type":"blocks","created_at":"2026-01-04T15:53:17.941053942-05:00","created_by":"import"},{"issue_id":"wl-71","depends_on_id":"wl-64","type":"blocks","created_at":"2026-01-04T15:53:17.942950518-05:00","created_by":"import"}]}
{"id":"wl-72","title":"Remove hardcoded 5am UTC offset from date calculations","description":"GOAL: Remove the hardcoded 5am UTC offset that was incorrectly compensating for EST timezone.\n\nCONTEXT: Date calculations currently add 5 hours to UTC, which was a workaround for timezone handling. With proper timezone support, this offset should be removed.\n\nBUG LOCATION:\n- src/utils/dates.ts (likely in startOfDay/endOfDay functions)\n- Look for:  or  or similar\n\nCURRENT (BUGGY):\n```typescript\n// Hardcoded offset\nconst start = new Date(date);\nstart.setUTCHours(5, 0, 0, 0); // BAD: assumes EST\n```\n\nEXPECTED (FIXED):\n```typescript\n// Use timezone-aware date handling\nconst start = zonedTimeToUtc(startOfDay(date), timezone);\n```\n\nTASKS:\n1. Find all hardcoded UTC offset usages\n2. Replace with timezone-aware calculations\n3. Update tests to verify correct behavior\n4. Test in different timezones\n\nFILES TO MODIFY:\n- src/utils/dates.ts\n\nDEPENDENCIES:\n- Requires wl-59 (timezone config) to be completed first\n\nTESTS TO RUN:\n```bash\n# 1. Run date tests\nbun test src/utils/dates.test.ts\n\n# 2. Test in EST\nTZ=America/New_York bun --eval \"\nimport { parseDateRange } from './src/utils/dates.ts';\nconst range = parseDateRange({ yesterday: true });\nconsole.log('Start:', range.start.toISOString());\nconsole.log('End:', range.end.toISOString());\nconsole.log('Start should be midnight EST, not 5am UTC');\n\"\n\n# 3. Test in other timezones\nTZ=America/Los_Angeles bun --eval \"/* same test */\"\nTZ=Europe/London bun --eval \"/* same test */\"\n\n# 4. Type check\nbun run typecheck\n```\n\nDONE WHEN:\n- No hardcoded UTC offsets remain\n- Date calculations use timezone parameter\n- Tests pass in multiple timezones\n- EST midnight = 05:00 UTC (not 00:00 UTC)","status":"closed","priority":0,"issue_type":"bug","assignee":"Sisyphus","estimated_minutes":30,"created_at":"2026-01-04T15:10:50.140266479-05:00","created_by":"justin","updated_at":"2026-01-04T16:54:50.918208389-05:00","closed_at":"2026-01-04T16:54:50.918208389-05:00","close_reason":"Completed: timezone-aware date ranges and snapshot keys","dependencies":[{"issue_id":"wl-72","depends_on_id":"wl-58","type":"parent-child","created_at":"2026-01-04T15:53:17.944582188-05:00","created_by":"import"},{"issue_id":"wl-72","depends_on_id":"wl-59","type":"blocks","created_at":"2026-01-04T15:53:17.946485855-05:00","created_by":"import"}]}
{"id":"wl-73","title":"Fix: Add error handling wrapper to dashboard fetchHandler","description":"The fetchHandler in bin/worklog.ts lacks a top-level try-catch. Unhandled errors can crash the server.\n\nLocation: bin/worklog.ts:992\n\nFix: Wrap the entire handler in try-catch and return 500 error response on unexpected errors.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:06.73893441-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:06.73893441-05:00"}
{"id":"wl-74","title":"Fix: Replace empty catch blocks with proper error handling","description":"Many empty catch blocks silently swallow errors, making debugging difficult.\n\nLocations:\n- src/sources/filesystem.ts:72, 166\n- src/sources/git.ts:202\n- src/sources/vscode.ts:123\n- src/sources/cursor.ts:124\n- bin/worklog.ts:270\n\nFix: Log errors or handle them explicitly instead of silently ignoring.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:07.841529665-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:07.841529665-05:00"}
{"id":"wl-75","title":"Fix: Improve API response error handling in LLM calls","description":"In src/llm.ts:110, if response.text() fails, it may throw an unhandled error.\n\nLocation: src/llm.ts:109-112\n\nFix: Wrap in try-catch or use response.text().catch() to handle errors gracefully.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:08.924059092-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:08.924059092-05:00"}
{"id":"wl-76","title":"Security: Add path traversal validation for snapshot keys","description":"The 'key' parameter in /api/report endpoint is not validated for path traversal attacks.\n\nLocation: bin/worklog.ts:1012\n\nFix: Validate/sanitize the key parameter (e.g., only allow alphanumeric, dash, underscore).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:09.927631261-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:09.927631261-05:00"}
{"id":"wl-77","title":"Security: Add API key format validation","description":"API keys are read from environment variables but not validated for format.\n\nLocation: src/llm.ts:78, 125\n\nFix: Add basic format validation (non-empty, reasonable length) before using API keys.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:10.733816302-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:10.733816302-05:00"}
{"id":"wl-78","title":"Security: Review dashboard XSS prevention","description":"User-controlled data (theme, dates) may be inserted into HTML without proper escaping.\n\nLocation: src/utils/dashboard.ts\n\nFix: Ensure all user inputs are properly escaped or use a templating library that handles escaping.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:11.569463049-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:11.569463049-05:00"}
{"id":"wl-79","title":"Fix: Add error handling for date parsing in dashboard","description":"parseDateInput may throw on invalid input, and errors aren't always caught in dashboard endpoints.\n\nLocation: bin/worklog.ts:1044-1045\n\nFix: Wrap date parsing in try-catch and return 400 error on invalid dates.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:12.456939963-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:12.456939963-05:00"}
{"id":"wl-7hh","title":"Add dark mode toggle","status":"closed","priority":2,"issue_type":"task","assignee":"sisyphus","created_at":"2026-01-02T15:28:51.70363395-05:00","updated_at":"2026-01-02T15:50:53.137597629-05:00","closed_at":"2026-01-02T15:50:17.456177099-05:00"}
{"id":"wl-80","title":"Fix: Add NaN check for port validation","description":"WORKLOG_DASHBOARD_PORT environment variable accepts NaN if parsing fails.\n\nLocation: src/utils/config.ts:149\n\nFix: Check Number.isNaN() before using the port value.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:13.209180955-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:13.209180955-05:00"}
{"id":"wl-81","title":"Performance: Parallelize file operations where safe","description":"Some file operations run sequentially where they could be parallelized for better performance.\n\nLocation: src/sources/filesystem.ts:121-167\n\nFix: Use Promise.all() where operations are independent and safe to parallelize.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:13.838763151-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:13.838763151-05:00"}
{"id":"wl-82","title":"Performance: Add request timeout to dashboard API","description":"Dashboard API requests have no timeout, which could lead to hanging requests.\n\nLocation: bin/worklog.ts:992-1058\n\nFix: Add timeout handling to prevent requests from hanging indefinitely.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:14.59984966-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:14.59984966-05:00"}
{"id":"wl-83","title":"Refactor: Improve type safety by replacing type assertions","description":"Type assertions (as SchedulePeriod, as Error \u0026 { code?: string }) bypass type checking.\n\nLocations: Multiple files\n\nFix: Use proper type guards or validation functions instead of type assertions.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:15.208965318-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:15.208965318-05:00"}
{"id":"wl-84","title":"Refactor: Extract port error detection to helper function","description":"Port error detection logic is duplicated in serveWithFallbackPort function.\n\nLocation: bin/worklog.ts:1066-1070, 1084-1088\n\nFix: Extract to a reusable helper function to reduce duplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:15.987255362-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:15.987255362-05:00"}
{"id":"wl-85","title":"Improvement: Add error context to error messages","description":"Some errors lack context (file path, operation being performed).\n\nFix: Include relevant context in error messages to aid debugging.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:16.6200854-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:16.6200854-05:00"}
{"id":"wl-86","title":"Feature: Add CORS headers to dashboard API","description":"No CORS headers are set if dashboard is accessed from different origin.\n\nLocation: bin/worklog.ts:992\n\nFix: Add CORS headers if cross-origin access is needed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:17.256937277-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:17.256937277-05:00"}
{"id":"wl-87","title":"Feature: Add rate limiting to dashboard API endpoints","description":"No rate limiting exists on dashboard API endpoints, which could lead to abuse.\n\nFix: Add basic rate limiting to prevent abuse.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:17.763598702-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:17.763598702-05:00"}
{"id":"wl-88","title":"Feature: Add health check endpoint","description":"No health check endpoint exists for monitoring/deployment checks.\n\nFix: Add /health endpoint that returns server status.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:18.357083972-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:18.357083972-05:00"}
{"id":"wl-89","title":"Docs: Document API error codes and responses","description":"No documentation exists for error codes and API responses.\n\nFix: Document all API error responses and status codes.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:18.872796746-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:18.872796746-05:00"}
{"id":"wl-90","title":"Docs: Document all environment variables in README","description":"Some environment variables are not documented in README.\n\nFix: Document all environment variables with descriptions and examples.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T17:39:19.418522099-05:00","created_by":"justin","updated_at":"2026-01-05T17:39:19.418522099-05:00"}
{"id":"wl-a6w","title":"Health checks and monitoring","description":"Add health checks, metrics collection, and monitoring","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T23:05:39.986871789-05:00","created_by":"justin","updated_at":"2026-01-04T23:05:39.986871789-05:00","dependencies":[{"issue_id":"wl-a6w","depends_on_id":"wl-viu","type":"parent-child","created_at":"2026-01-04T23:06:01.298872851-05:00","created_by":"justin"}]}
{"id":"wl-b78","title":"Cross-platform compatibility testing","description":"Ensure Windows/Linux compatibility and test all platforms","status":"closed","priority":1,"issue_type":"task","assignee":"justin","created_at":"2026-01-04T23:05:05.109094149-05:00","created_by":"justin","updated_at":"2026-01-04T23:11:29.496056271-05:00","closed_at":"2026-01-04T23:11:29.496060546-05:00","dependencies":[{"issue_id":"wl-b78","depends_on_id":"wl-m22","type":"parent-child","created_at":"2026-01-04T23:05:51.460804242-05:00","created_by":"justin"}]}
{"id":"wl-f6k","title":"Documentation \u0026 UX Epic","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-04T23:05:20.439694469-05:00","created_by":"justin","updated_at":"2026-01-04T23:05:20.439694469-05:00"}
{"id":"wl-g4n","title":"Decide how to test progress output logic","description":"DECISION: Extract progress logic into testable ProgressReporter class with dependency injection (following pattern from wl-q17 cron refactoring).\n\nRecommended approach:\n- Create src/utils/progress.ts with ProgressReporter class\n- Use dependency injection for console.error and TTY detection\n- Add comprehensive unit tests in src/utils/progress.test.ts\n- Refactor bin/worklog.ts to use the ProgressReporter\n- Added smoke test checklist to SMOKE_TESTS.md\n\nSee full analysis at: /tmp/progress-testing-analysis.md\n\nBenefits:\n- Fully testable without mocks\n- Clean separation of concerns\n- Follows established codebase pattern\n- Comprehensive test coverage for all edge cases\n\nEstimated implementation: ~2 hours","status":"closed","priority":3,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":45,"created_at":"2026-01-02T15:03:56.632929728-05:00","updated_at":"2026-01-02T15:46:40.785092141-05:00","closed_at":"2026-01-02T15:46:10.833400555-05:00","dependencies":[{"issue_id":"wl-g4n","depends_on_id":"wl-tcq","type":"parent-child","created_at":"2026-01-02T15:04:58.621614838-05:00","created_by":"daemon"}]}
{"id":"wl-hta","title":"Performance \u0026 Optimization Epic","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-04T23:04:32.634498104-05:00","created_by":"justin","updated_at":"2026-01-04T23:04:32.634498104-05:00"}
{"id":"wl-idh","title":"Add unit tests for trends calculations and formatting","status":"closed","priority":2,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":45,"created_at":"2026-01-02T15:03:55.992895263-05:00","updated_at":"2026-01-02T15:27:32.64194352-05:00","closed_at":"2026-01-02T15:27:23.789327086-05:00","dependencies":[{"issue_id":"wl-idh","depends_on_id":"wl-tcq","type":"parent-child","created_at":"2026-01-02T15:04:58.531298466-05:00","created_by":"daemon"}]}
{"id":"wl-m22","title":"Quality Assurance Epic","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-04T23:04:53.138094402-05:00","created_by":"justin","updated_at":"2026-01-04T23:04:53.138094402-05:00"}
{"id":"wl-n5l","title":"REST API documentation","description":"Document REST API endpoints for integrations","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T23:05:28.849746292-05:00","created_by":"justin","updated_at":"2026-01-04T23:05:28.849746292-05:00","dependencies":[{"issue_id":"wl-n5l","depends_on_id":"wl-f6k","type":"parent-child","created_at":"2026-01-04T23:05:58.43904154-05:00","created_by":"justin"}]}
{"id":"wl-ppe","title":"Add comprehensive integration tests","description":"Create end-to-end tests covering full workflows","status":"closed","priority":1,"issue_type":"task","assignee":"justin","created_at":"2026-01-04T23:04:57.682547404-05:00","created_by":"justin","updated_at":"2026-01-04T23:09:34.573503279-05:00","closed_at":"2026-01-04T23:09:34.573513571-05:00","dependencies":[{"issue_id":"wl-ppe","depends_on_id":"wl-m22","type":"parent-child","created_at":"2026-01-04T23:05:51.304843532-05:00","created_by":"justin"}]}
{"id":"wl-q17","title":"Make cron run Slack posting testable and add unit tests","status":"closed","priority":2,"issue_type":"task","assignee":"sisyphus","estimated_minutes":90,"created_at":"2026-01-02T15:03:56.054854717-05:00","updated_at":"2026-01-02T15:46:40.78663772-05:00","closed_at":"2026-01-02T15:36:18.341992848-05:00","dependencies":[{"issue_id":"wl-q17","depends_on_id":"wl-tcq","type":"parent-child","created_at":"2026-01-02T15:04:58.562337338-05:00","created_by":"daemon"}]}
{"id":"wl-qlt","title":"Advanced filtering capabilities","description":"Filter by project patterns, exclude certain sources, date ranges","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-04T23:05:13.494706987-05:00","created_by":"justin","updated_at":"2026-01-04T23:05:13.494706987-05:00","dependencies":[{"issue_id":"wl-qlt","depends_on_id":"wl-59f","type":"parent-child","created_at":"2026-01-04T23:05:54.689080994-05:00","created_by":"justin"}]}
{"id":"wl-reu","title":"Load testing for large datasets","description":"Test performance with large datasets and concurrent operations","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T23:05:02.129620023-05:00","created_by":"justin","updated_at":"2026-01-04T23:05:02.129620023-05:00","dependencies":[{"issue_id":"wl-reu","depends_on_id":"wl-m22","type":"parent-child","created_at":"2026-01-04T23:05:51.373826436-05:00","created_by":"justin"}]}
{"id":"wl-shs","title":"Docker containerization","description":"Create Docker setup for easier deployment","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T23:05:35.949741993-05:00","created_by":"justin","updated_at":"2026-01-04T23:05:35.949741993-05:00","dependencies":[{"issue_id":"wl-shs","depends_on_id":"wl-viu","type":"parent-child","created_at":"2026-01-04T23:06:01.22195323-05:00","created_by":"justin"}]}
{"id":"wl-swt","title":"Demo: Add new feature to worklog dashboard","status":"closed","priority":2,"issue_type":"feature","assignee":"Sisyphus","created_at":"2026-01-02T15:48:00.028539297-05:00","updated_at":"2026-01-02T15:54:44.768578214-05:00","closed_at":"2026-01-02T15:54:38.577352637-05:00"}
{"id":"wl-tcq","title":"Testing plan for feat/beads branch","status":"closed","priority":1,"issue_type":"epic","estimated_minutes":180,"created_at":"2026-01-02T15:03:17.795531244-05:00","updated_at":"2026-01-02T15:46:40.789849506-05:00","closed_at":"2026-01-02T15:43:06.527973302-05:00"}
{"id":"wl-v9i","title":"[Deleted]","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-03T00:21:56.81643591Z","updated_at":"2026-01-04T14:27:56.553011525-05:00","deleted_at":"2026-01-03T00:21:56.81643591Z","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"task"}
{"id":"wl-viu","title":"Infrastructure Epic","status":"open","priority":3,"issue_type":"epic","created_at":"2026-01-04T23:05:32.174559523-05:00","created_by":"justin","updated_at":"2026-01-04T23:05:32.174559523-05:00"}
{"id":"wl-wb1","title":"Project-mode attribution + trends + cron+slack hardening","description":"Refactor project-centric reporting so every WorkItem is attributed to a configured repo when evidence exists, otherwise placed under a Misc bucket. Wire up --trends by comparing current vs previous equivalent period. Harden cron Slack posting by moving posting into a CLI subcommand to avoid shell-quoting/injection issues.","design":"Key files: bin/worklog.ts (CLI), src/aggregator.ts (grouping), src/formatters/projects.ts (rendering), src/utils/trends.ts (trend calc), src/cron.ts (cron install/status). Implement attribution via a single resolver (new util) used by aggregation. Prefer longest-path repo match. Avoid writing temp files in tests (no deletions); favor pure helpers and injected adapters.","acceptance_criteria":"1) In project mode, activity from all enabled sources appears either under a project or under Misc. 2) --trends prints deterministic trend output for each format and is covered by unit tests. 3) cron install with --slack produces a robust cron line that posts to Slack without shell quoting hacks. 4) bun test and bun run check pass.","status":"closed","priority":1,"issue_type":"epic","estimated_minutes":480,"created_at":"2026-01-02T10:51:31.144830663-05:00","updated_at":"2026-01-02T15:25:15.894004453-05:00","closed_at":"2026-01-02T14:56:46.510044629-05:00"}
{"id":"wl-wb1.1","title":"Align CLI version with package.json","description":"bin/worklog.ts currently hardcodes VERSION=0.1.0 while package.json is 2.0.0; make --version reflect the real release version.","design":"Update bin/worklog.ts:14 (VERSION). Prefer a single source of truth (package.json). Consider runtime JSON import or reading via Bun.file; ensure it works when bun build --compile is used. Update src/worklog.test.ts:17-25 accordingly.","acceptance_criteria":"1) worklog --version prints the package.json version. 2) src/worklog.test.ts version expectation updated. 3) bun test and bun run check pass.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":45,"created_at":"2026-01-02T10:52:56.834090634-05:00","updated_at":"2026-01-02T13:52:48.206391838-05:00","closed_at":"2026-01-02T13:52:48.206391838-05:00","close_reason":"Completed: Version now imports from package.json and displays 2.0.0. Tests pass.","dependencies":[{"issue_id":"wl-wb1.1","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:52:56.834612947-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.10","title":"Infer repo attribution for OpenCode sessions","description":"opencode reader currently emits sessions without repo/project metadata, so they are dropped or go to Misc. Enhance parsing to look for file path evidence in user/assistant messages or tool logs, and attribute sessions to the configured repo containing those paths (longest-path match).","design":"Files: src/sources/opencode.ts. Add helper that extracts candidate file paths from message content (absolute paths and common patterns like src/... if repo root known). Use resolver wl-wb1.4 for mapping. Keep current behavior of using first user prompt for title; only add metadata.repo/project when evidence exists.","acceptance_criteria":"1) If any message line contains a file path under a configured repo, the session WorkItem is attributed to that repo. 2) If no evidence exists, session goes to Misc. 3) Deterministic unit tests exist using in-memory JSONL strings and a fake Config.gitRepos list (no filesystem).","status":"closed","priority":1,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":120,"created_at":"2026-01-02T10:55:12.861231717-05:00","updated_at":"2026-01-02T14:24:31.512041882-05:00","closed_at":"2026-01-02T14:24:31.512041882-05:00","close_reason":"Completed: Implemented repo attribution for OpenCode sessions by extracting file paths from message content and matching to configured repos. Added extractFilePaths() and findRepoFromMessages() helpers. Created comprehensive test suite with 23 passing tests. All checks pass.","dependencies":[{"issue_id":"wl-wb1.10","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:55:12.861861163-05:00","created_by":"daemon"},{"issue_id":"wl-wb1.10","depends_on_id":"wl-wb1.4","type":"blocks","created_at":"2026-01-02T10:58:28.777875497-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.11","title":"Infer repo attribution for Codex sessions","description":"codex reader currently emits sessions without repo/project metadata. Enhance parsing to look for file path evidence in messages and attribute to configured repos when possible; otherwise Misc.","design":"Files: src/sources/codex.ts. Similar approach to wl-wb1.10. Prefer extracting file paths from user prompts and tool output-like strings. Use longest-path match against expanded config.gitRepos.","acceptance_criteria":"1) If message content contains a file path under a configured repo, the session WorkItem is attributed to that repo. 2) Otherwise goes to Misc. 3) Deterministic unit tests exist using in-memory JSONL strings (no filesystem).","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2026-01-02T10:55:12.889150841-05:00","updated_at":"2026-01-02T14:28:59.341072088-05:00","closed_at":"2026-01-02T14:28:59.341072088-05:00","close_reason":"Completed: Implemented repo attribution for Codex sessions with comprehensive tests. All acceptance criteria met.","dependencies":[{"issue_id":"wl-wb1.11","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:55:12.889859009-05:00","created_by":"daemon"},{"issue_id":"wl-wb1.11","depends_on_id":"wl-wb1.4","type":"blocks","created_at":"2026-01-02T10:58:28.803875013-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.12","title":"Wire up --trends end-to-end","description":"Implement the --trends flag so it computes current vs previous equivalent period trends using src/utils/trends.ts and renders them in markdown/plain/slack/json outputs.","design":"Files: bin/worklog.ts (flag handling), src/utils/trends.ts (already has getPreviousDateRange/calculateTrends/formatTrendSummary), src/formatters/projects.ts or new formatter helpers. Implementation approach: when --trends is set, collect a previous WorkSummary by re-running readers with previous range; then compute TrendData and include it in output. Avoid time-dependent tests; use fixed Dates and in-memory WorkSummary fixtures.","acceptance_criteria":"1) worklog --trends produces a trend section instead of the current coming-soon warning. 2) Trend computation uses previous equivalent date range and same sources selection. 3) Unit tests exist for trend range + calculations with deterministic fixtures. 4) Output is supported for markdown/plain/slack/json (JSON includes a trends object). 5) bun test and bun run check pass.","status":"closed","priority":1,"issue_type":"feature","assignee":"Sisyphus","estimated_minutes":120,"created_at":"2026-01-02T10:56:23.032363192-05:00","updated_at":"2026-01-02T14:34:19.282037046-05:00","closed_at":"2026-01-02T14:34:19.282037046-05:00","close_reason":"Completed: Implemented end-to-end --trends functionality with full format support and comprehensive tests","dependencies":[{"issue_id":"wl-wb1.12","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:56:23.033041933-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.13","title":"Add cron Slack posting helper subcommand","description":"Replace cron install Slack piping with a safe CLI subcommand that renders output and posts to Slack via fetch, avoiding shell quoting issues in src/cron.ts.","design":"Files: src/cron.ts and bin/worklog.ts. Consider storing webhook in env var or passing as flag with robust quoting; prefer minimal shell in cron line. Implement Slack post by generating Slack-format output and calling fetch(webhook, {method: POST, body: JSON.stringify({text})}). Add tests for buildCronLine output using fixed inputs.","acceptance_criteria":"1) A new cron subcommand exists (e.g. worklog cron run or worklog cron post-slack) that can post to Slack without using curl or shell quoting hacks. 2) src/cron.ts buildCronLine uses the subcommand for --slack installs. 3) Unit tests validate cron line generation is stable and does not embed raw JSON quoting patterns. 4) bun test and bun run check pass.","status":"closed","priority":1,"issue_type":"feature","assignee":"sisyphus","estimated_minutes":150,"created_at":"2026-01-02T10:56:23.080324838-05:00","updated_at":"2026-01-02T14:42:12.47099076-05:00","closed_at":"2026-01-02T14:42:12.47099076-05:00","close_reason":"Completed: Added 'worklog cron run' subcommand that posts to Slack via fetch, avoiding shell quoting issues. Webhook is set as WORKLOG_SLACK_WEBHOOK environment variable in crontab. All tests pass.","dependencies":[{"issue_id":"wl-wb1.13","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:56:23.081508187-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.14","title":"Deduplicate JSONL traversal and subject cleaning helpers","description":"Reduce duplicate helper logic: findJsonlFiles duplicated in src/sources/claude.ts and src/sources/factory.ts; cleanSubject duplicated in src/llm.ts and src/formatters/projects.ts.","design":"Extract findJsonlFiles to a shared module under src/utils or src/sources/_shared. Extract cleanSubject into src/utils/commitSubjects.ts (or similar) and import from both llm and formatter. Keep changes small; no behavior changes.","acceptance_criteria":"1) Shared helper(s) introduced and used by both call sites. 2) Behavior remains identical (verified by existing tests + new targeted unit tests where needed). 3) bun test and bun run check pass.","status":"closed","priority":3,"issue_type":"chore","assignee":"sisyphus","estimated_minutes":90,"created_at":"2026-01-02T10:56:23.131792149-05:00","updated_at":"2026-01-02T14:08:20.803267792-05:00","closed_at":"2026-01-02T14:08:20.803267792-05:00","close_reason":"Completed: Extracted findJsonlFiles and cleanSubject to shared utility modules. All tests passing.","dependencies":[{"issue_id":"wl-wb1.14","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:56:23.132319824-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.15","title":"Dashboard handles empty summary safely","description":"src/utils/dashboard.ts computes percentage as count/summary.items.length; when items is empty, this becomes NaN. Guard against empty input and render 0s instead.","design":"Change chartData percentage calculation to return 0 when total==0. Consider also guarding Math.max(...hourlyData) and other derived metrics if needed.","acceptance_criteria":"1) Dashboard renders without NaN when summary.items is empty. 2) Add a deterministic unit test for generateDashboardHTML with an empty WorkSummary fixture. 3) bun test and bun run check pass.","status":"closed","priority":4,"issue_type":"chore","assignee":"Sisyphus","estimated_minutes":30,"created_at":"2026-01-02T10:56:23.179334878-05:00","updated_at":"2026-01-02T14:05:22.439099766-05:00","closed_at":"2026-01-02T14:05:22.439099766-05:00","close_reason":"Fixed percentage calculation and Math.max to handle empty summaries. Added comprehensive unit tests.","dependencies":[{"issue_id":"wl-wb1.15","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:56:23.180683382-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.2","title":"Remove commander casts for --sources/--repos","description":"bin/worklog.ts currently uses unsafe type casts to treat --sources/--repos as strings. Remove the casts by making commander option types match and parsing comma-separated lists in a typed way.","design":"Files: bin/worklog.ts and src/types.ts. Options: (A) keep CliOptions.sources and repos as strings and split once, (B) define commander option parsers that return string[] and update CliOptions accordingly. Prefer Commander program.opts\u003cT\u003e() or typed action parameter instead of casting. Ensure README comma-separated usage still works. Add/adjust src/worklog.test.ts to cover --sources and --repos parsing deterministically.","acceptance_criteria":"1) No unsafe cast remains in bin/worklog.ts. 2) src/types.ts CliOptions matches actual runtime options. 3) worklog --help and existing e2e tests still pass; add a new e2e test for parsing comma-separated sources/repos.","status":"closed","priority":2,"issue_type":"task","assignee":"sisyphus","estimated_minutes":60,"created_at":"2026-01-02T10:52:56.881240622-05:00","updated_at":"2026-01-02T13:55:27.633390468-05:00","closed_at":"2026-01-02T13:55:27.633390468-05:00","close_reason":"Completed: Removed unsafe type casts by adding parseCommaSeparated helper and applying it to Commander options. All tests passing.","dependencies":[{"issue_id":"wl-wb1.2","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:52:56.881802242-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.3","title":"Fix expandPath tilde semantics","description":"src/utils/config.ts expandPath currently expands any string starting with '~' via join(homedir(), path.slice(1)); tighten semantics to expand only ~, ~/..., and ~\\...","design":"Update src/utils/config.ts:45-50. Keep function pure and cross-platform; avoid introducing new deps. Add tests for the edge cases above.","acceptance_criteria":"1) expandPath('~') returns homedir; expandPath('~/x') and expandPath('~\\x') join correctly; expandPath('~user') remains unchanged. 2) src/utils/config.test.ts updated/extended. 3) bun test and bun run check pass.","status":"closed","priority":2,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":30,"created_at":"2026-01-02T10:52:56.911192019-05:00","updated_at":"2026-01-02T13:57:38.431484481-05:00","closed_at":"2026-01-02T13:57:38.431484481-05:00","close_reason":"Fixed expandPath to only expand ~, ~/, and ~\\ patterns (not ~user). Added comprehensive tests. All checks pass.","dependencies":[{"issue_id":"wl-wb1.3","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:52:56.911685635-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.4","title":"Add project attribution resolver (repo-or-misc)","description":"Create a single attribution function that maps a WorkItem to a configured git repo when evidence exists, otherwise returns misc. This replaces ad-hoc matching spread across aggregator/formatters.","design":"Add new module under src/utils (e.g. src/utils/attribution.ts). Inputs: WorkItem + Config (gitRepos) + maybe precomputed normalized repo map. Rules: (a) if item.metadata.repo is a path, match to expanded config.gitRepos by prefix (prefer longest). (b) if item.metadata.repo is owner/name, match by repo basename to configured repos. (c) if item.metadata.project is present, match by normalized name to repo basename. Else misc. Add unit tests using in-memory WorkItem objects (no filesystem). Files to touch later: src/aggregator.ts should call this resolver.","acceptance_criteria":"1) A pure resolver exists with unit tests covering: metadata.repo, metadata.project, github owner/repo strings, and longest-path match for nested repos. 2) Resolver behavior is deterministic and documented in code. 3) No other module re-implements repo matching logic.","status":"closed","priority":1,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":120,"created_at":"2026-01-02T10:54:47.261553009-05:00","updated_at":"2026-01-02T13:46:12.080009525-05:00","closed_at":"2026-01-02T13:46:12.080009525-05:00","close_reason":"Completed: Created src/utils/attribution.ts with attributeWorkItem() function that supports path-based, GitHub owner/repo, and project name matching. Includes comprehensive test suite with 21 passing tests covering all attribution rules and edge cases. All checks pass.","dependencies":[{"issue_id":"wl-wb1.4","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:54:47.262552738-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.5","title":"Update aggregation to include Misc bucket","description":"Modify src/aggregator.ts and src/types.ts so project-centric aggregation always produces a Misc project bucket when there are unattributed items (or when no gitRepos are configured). Use the new resolver to assign items.","design":"Refactor aggregateByProject() to build projects only from configured gitRepos plus an optional misc project. Ensure daily grouping works for misc the same way. Keep project ordering stable (projects alpha, misc last). Remove getProjectFromWorkItem() usage in favor of resolver.","acceptance_criteria":"1) Items from any source that cannot be mapped land under Misc instead of being dropped. 2) When config.gitRepos is empty, git/github/agent items still appear under Misc. 3) src/aggregator.test.ts updated with deterministic fixtures covering misc behavior. 4) bun test and bun run check pass.","status":"closed","priority":1,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":90,"created_at":"2026-01-02T10:54:47.288250099-05:00","updated_at":"2026-01-02T13:49:49.959868869-05:00","closed_at":"2026-01-02T13:49:49.959868869-05:00","close_reason":"Completed: Implemented Misc bucket for unattributed items. All items now either match a configured repo or go to Misc. Added comprehensive tests covering edge cases.","dependencies":[{"issue_id":"wl-wb1.5","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:54:47.288653261-05:00","created_by":"daemon"},{"issue_id":"wl-wb1.5","depends_on_id":"wl-wb1.4","type":"blocks","created_at":"2026-01-02T10:58:28.637274744-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.6","title":"Render Misc bucket in all output formats","description":"Update src/formatters/projects.ts so Misc is rendered like a normal project section in markdown/plain/slack/json. Ensure verbose and non-verbose modes behave consistently.","design":"Files: src/formatters/projects.ts and possibly src/formatters/index.ts. Introduce a small formatter test file under src/formatters to validate output strings (pure string tests). Do not rely on timezones; use fixed Dates.","acceptance_criteria":"1) Markdown/plain/slack output includes a Misc section when misc items exist. 2) JSON output includes misc as a project entry with name Misc and path null or empty. 3) Add formatter unit tests that assert misc rendering for a small ProjectWorkSummary fixture. 4) bun test and bun run check pass.","status":"closed","priority":1,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":90,"created_at":"2026-01-02T10:54:47.315947272-05:00","updated_at":"2026-01-02T14:02:51.239605168-05:00","closed_at":"2026-01-02T14:02:51.239605168-05:00","close_reason":"Completed: Added comprehensive formatter tests for Misc bucket rendering in markdown/plain/slack/json formats. JSON output now returns null for Misc project path. All tests pass.","dependencies":[{"issue_id":"wl-wb1.6","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:54:47.316452886-05:00","created_by":"daemon"},{"issue_id":"wl-wb1.6","depends_on_id":"wl-wb1.5","type":"blocks","created_at":"2026-01-02T10:58:28.664515038-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.7","title":"Attribute VS Code and Cursor activity to repos","description":"vscode/cursor readers emit workspace folderUri but no repo/project; add attribution by mapping folderUri paths to configured gitRepos and setting metadata.repo (or relying on resolver).","design":"Files: src/sources/vscode.ts and src/sources/cursor.ts. Implement a pure helper: parseFileUriToPath(uri) -\u003e string | null (handle file://, percent-decoding, and Windows drive paths). Then use the attribution resolver (wl-wb1.4) to match against expanded config.gitRepos by prefix/longest path.","acceptance_criteria":"1) When folderUri points inside a configured repo path, the resulting WorkItem is attributed to that repo in project mode (not Misc). 2) If folderUri cannot be parsed or does not match any configured repo, item goes to Misc. 3) Add deterministic unit tests for URI parsing + path-to-repo matching (no real VS Code dirs).","status":"closed","priority":1,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":90,"created_at":"2026-01-02T10:55:12.771533267-05:00","updated_at":"2026-01-02T14:12:17.345096284-05:00","closed_at":"2026-01-02T14:12:17.345096284-05:00","close_reason":"Completed: Implemented parseFileUriToPath() helper in both vscode.ts and cursor.ts to parse file:// URIs with percent-decoding and Windows path support. WorkItems now include metadata.repo extracted from folderUri, enabling automatic attribution to configured repos. Added 58 comprehensive tests covering all path formats and edge cases. All tests and checks pass.","dependencies":[{"issue_id":"wl-wb1.7","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:55:12.772133419-05:00","created_by":"daemon"},{"issue_id":"wl-wb1.7","depends_on_id":"wl-wb1.4","type":"blocks","created_at":"2026-01-02T10:58:28.692799316-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.8","title":"Refactor filesystem source to be repo-centric","description":"filesystem reader currently scans a single broad base path and emits one global summary without repo/project metadata. Change it to scan each configured git repo and emit one WorkItem per repo (plus optional misc summary if desired).","design":"Files: src/sources/filesystem.ts. Introduce an optional dependency-injection parameter or internal adapter object for readdir/stat, so tests can provide an in-memory directory tree with known mtimes. Keep default production behavior using node:fs/promises. Ensure skipDirs still applied.","acceptance_criteria":"1) For each configured git repo, filesystem reader returns an item with metadata.repo set to that repo and stats limited to that repo. 2) Items appear under the correct repo section in project mode. 3) Deterministic tests exist by injecting a fake fs adapter (no temp dirs/files).","status":"closed","priority":1,"issue_type":"task","assignee":"sisyphus","estimated_minutes":120,"created_at":"2026-01-02T10:55:12.801113763-05:00","updated_at":"2026-01-02T14:18:51.986237123-05:00","closed_at":"2026-01-02T14:18:51.986237123-05:00","close_reason":"Completed: Refactored filesystem source to scan each configured git repo separately and emit one WorkItem per repo with metadata.repo and metadata.project. Added FilesystemAdapter interface for dependency injection and comprehensive tests using in-memory filesystem adapter.","dependencies":[{"issue_id":"wl-wb1.8","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:55:12.801753636-05:00","created_by":"daemon"},{"issue_id":"wl-wb1.8","depends_on_id":"wl-wb1.4","type":"blocks","created_at":"2026-01-02T10:58:28.718794719-05:00","created_by":"daemon"}]}
{"id":"wl-wb1.9","title":"Attribute terminal activity using cd timeline heuristics","description":"terminal reader aggregates commands globally. Add best-effort repo attribution by parsing cd commands in timestamped history entries, tracking current working directory over time, and attributing subsequent commands to the last-known repo when it matches configured gitRepos.","design":"Files: src/sources/terminal.ts. Refactor to separate parsing of history content into events (timestamp, commandLine). Track cwd changes when command is cd. Attribute commands by last cwd at or before timestamp. Keep existing ignore list behavior but do not ignore cd for the attribution state machine.","acceptance_criteria":"1) When history contains timestamped cd into a configured repo, subsequent commands within the dateRange are attributed to that repo (not Misc). 2) When cwd cannot be inferred, fall back to Misc. 3) Deterministic unit tests exist using in-memory history strings for bash/zsh/fish formats.","status":"closed","priority":1,"issue_type":"task","assignee":"Sisyphus","estimated_minutes":120,"created_at":"2026-01-02T10:55:12.829777461-05:00","updated_at":"2026-01-02T14:54:41.092774344-05:00","closed_at":"2026-01-02T14:54:41.092774344-05:00","close_reason":"Terminal attribution implemented with cd timeline tracking. All tests pass.","dependencies":[{"issue_id":"wl-wb1.9","depends_on_id":"wl-wb1","type":"parent-child","created_at":"2026-01-02T10:55:12.830219447-05:00","created_by":"daemon"},{"issue_id":"wl-wb1.9","depends_on_id":"wl-wb1.4","type":"blocks","created_at":"2026-01-02T10:58:28.754284811-05:00","created_by":"daemon"}]}
{"id":"wl-y9z","title":"Optimize timezone handling","description":"Cache date-fns-tz operations and optimize timezone conversions","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T23:04:47.720309762-05:00","created_by":"justin","updated_at":"2026-01-04T23:04:47.720309762-05:00","dependencies":[{"issue_id":"wl-y9z","depends_on_id":"wl-hta","type":"parent-child","created_at":"2026-01-04T23:05:47.682818458-05:00","created_by":"justin"}]}
